<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Three.js GLB Viewer - Camera Light</title>
    <style>
        body { margin: 0; overflow: hidden; background: #222; }
        canvas { display: block; }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>

</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>

 <div id="three-container" class="w-[500px] h-[300px] border-[20px] border-teel-500">
</div>

<script>
    // Scene
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xffffff);

    // Container reference
    const container = document.getElementById('three-container');

    // Camera
    let cameraSize = 1;
    const aspect = container.clientWidth / container.clientHeight;
    const camera = new THREE.OrthographicCamera(
        -cameraSize * aspect, cameraSize * aspect,
        cameraSize, -cameraSize,
        0.1, 1000
    );
    camera.position.set(0, 5, 5);
    camera.lookAt(0, 0, 0);

    // Renderer
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.shadowMap.enabled = false; // No shadows at all
    renderer.setSize(container.clientWidth, container.clientHeight);
    container.appendChild(renderer.domElement);

    // Global soft light
    const hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 1.5);
    scene.add(hemiLight);

    // Camera-follow light
    const camLight = new THREE.DirectionalLight(0xffffff, 1);
    scene.add(camLight);
    scene.add(camLight.target);

    // GLB Loader
    const loader = new THREE.GLTFLoader();
    loader.load(
        'Tools/nigana_nga_animate2.glb',
        function (gltf) {
            const model = gltf.scene;
            scene.add(model);

            // Center model
            const box = new THREE.Box3().setFromObject(model);
            const center = box.getCenter(new THREE.Vector3());
            const size = box.getSize(new THREE.Vector3());
            model.position.sub(center);

            // Adjust camera
            const maxDim = Math.max(size.x, size.z);
            cameraSize = maxDim / 2;
            const aspect = container.clientWidth / container.clientHeight;
            camera.left = -cameraSize * aspect;
            camera.right = cameraSize * aspect;
            camera.top = cameraSize;
            camera.bottom = -cameraSize;
            camera.position.set(0, size.y * 2, size.z * 2);
            camera.lookAt(0, 0, 0);
            camera.updateProjectionMatrix();
        },
        undefined,
        function (error) {
            console.error('Error loading model:', error);
        }
    );

    // Resize handler
    window.addEventListener('resize', () => {
        const aspect = container.clientWidth / container.clientHeight;
        camera.left = -cameraSize * aspect;
        camera.right = cameraSize * aspect;
        camera.top = cameraSize;
        camera.bottom = -cameraSize;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
    });

    // Animation loop
    function animate() {
        requestAnimationFrame(animate);

        // Make the light follow the camera
        camLight.position.copy(camera.position);
        camLight.target.position.set(0, 0, 0);
        camLight.target.updateMatrixWorld();

        renderer.render(scene, camera);
    }
    animate();
</script>

    
</body>
</html>
